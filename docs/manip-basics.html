<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Basics | Data Wrangling</title>
  <meta name="description" content="A collection of readings on data wrangling." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Basics | Data Wrangling" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dcl-wrangle.stanford.edu" />
  
  <meta property="og:description" content="A collection of readings on data wrangling." />
  <meta name="github-repo" content="dcl-docs/wrangle" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Basics | Data Wrangling" />
  
  <meta name="twitter:description" content="A collection of readings on data wrangling." />
  

<meta name="author" content="Sara Altman, Bill Behrman, Hadley Wickham" />


<meta name="date" content="2021-09-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="manip-one-table.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Data Wrangling</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#an-evolving-book"><i class="fa fa-check"></i>An evolving book</a></li>
</ul></li>
<li class="part"><span><b>I Manipulation</b></span></li>
<li class="chapter" data-level="1" data-path="manip-basics.html"><a href="manip-basics.html"><i class="fa fa-check"></i><b>1</b> Basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="manip-basics.html"><a href="manip-basics.html#dplyr-basics"><i class="fa fa-check"></i><b>1.1</b> dplyr basics</a></li>
<li class="chapter" data-level="1.2" data-path="manip-basics.html"><a href="manip-basics.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>1.2</b> Filter rows with <code>filter()</code></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="manip-basics.html"><a href="manip-basics.html#comparisons"><i class="fa fa-check"></i><b>1.2.1</b> Comparisons</a></li>
<li class="chapter" data-level="1.2.2" data-path="manip-basics.html"><a href="manip-basics.html#logical-operators"><i class="fa fa-check"></i><b>1.2.2</b> Logical operators</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="manip-basics.html"><a href="manip-basics.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>1.3</b> Add new variables with <code>mutate()</code></a></li>
<li class="chapter" data-level="1.4" data-path="manip-basics.html"><a href="manip-basics.html#grouped-summaries-with-summarize"><i class="fa fa-check"></i><b>1.4</b> Grouped summaries with <code>summarize()</code></a></li>
<li class="chapter" data-level="1.5" data-path="manip-basics.html"><a href="manip-basics.html#combining-multiple-operations-with-the-pipe"><i class="fa fa-check"></i><b>1.5</b> Combining multiple operations with the pipe</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manip-one-table.html"><a href="manip-one-table.html"><i class="fa fa-check"></i><b>2</b> Other single-table verbs</a>
<ul>
<li class="chapter" data-level="2.1" data-path="manip-one-table.html"><a href="manip-one-table.html#select"><i class="fa fa-check"></i><b>2.1</b> Select</a></li>
<li class="chapter" data-level="2.2" data-path="manip-one-table.html"><a href="manip-one-table.html#rename"><i class="fa fa-check"></i><b>2.2</b> Rename</a></li>
<li class="chapter" data-level="2.3" data-path="manip-one-table.html"><a href="manip-one-table.html#change-column-order"><i class="fa fa-check"></i><b>2.3</b> Change column order</a></li>
<li class="chapter" data-level="2.4" data-path="manip-one-table.html"><a href="manip-one-table.html#transmute"><i class="fa fa-check"></i><b>2.4</b> Transmute</a></li>
<li class="chapter" data-level="2.5" data-path="manip-one-table.html"><a href="manip-one-table.html#arrange"><i class="fa fa-check"></i><b>2.5</b> Arrange</a></li>
<li class="chapter" data-level="2.6" data-path="manip-one-table.html"><a href="manip-one-table.html#distinct"><i class="fa fa-check"></i><b>2.6</b> Distinct</a></li>
<li class="chapter" data-level="2.7" data-path="manip-one-table.html"><a href="manip-one-table.html#slice-rows"><i class="fa fa-check"></i><b>2.7</b> Slice rows</a></li>
<li class="chapter" data-level="2.8" data-path="manip-one-table.html"><a href="manip-one-table.html#sample"><i class="fa fa-check"></i><b>2.8</b> Sample</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="parse-basics.html"><a href="parse-basics.html"><i class="fa fa-check"></i><b>3</b> Parsing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="parse-basics.html"><a href="parse-basics.html#delimited-files"><i class="fa fa-check"></i><b>3.1</b> Delimited files</a></li>
<li class="chapter" data-level="3.2" data-path="parse-basics.html"><a href="parse-basics.html#read_csv"><i class="fa fa-check"></i><b>3.2</b> <code>read_csv()</code></a></li>
</ul></li>
<li class="part"><span><b>II Tidy data</b></span></li>
<li class="chapter" data-level="4" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>4</b> Introduction</a></li>
<li class="chapter" data-level="5" data-path="pivot-basic.html"><a href="pivot-basic.html"><i class="fa fa-check"></i><b>5</b> Basic pivoting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pivot-basic.html"><a href="pivot-basic.html#longer"><i class="fa fa-check"></i><b>5.1</b> Longer</a></li>
<li class="chapter" data-level="5.2" data-path="pivot-basic.html"><a href="pivot-basic.html#wider"><i class="fa fa-check"></i><b>5.2</b> Wider</a></li>
<li class="chapter" data-level="5.3" data-path="pivot-basic.html"><a href="pivot-basic.html#missing-values"><i class="fa fa-check"></i><b>5.3</b> Missing values</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="pivot-advanced.html"><a href="pivot-advanced.html"><i class="fa fa-check"></i><b>6</b> Advanced pivoting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="pivot-advanced.html"><a href="pivot-advanced.html#longer-1"><i class="fa fa-check"></i><b>6.1</b> Longer</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="pivot-advanced.html"><a href="pivot-advanced.html#types"><i class="fa fa-check"></i><b>6.1.1</b> Types</a></li>
<li class="chapter" data-level="6.1.2" data-path="pivot-advanced.html"><a href="pivot-advanced.html#prefixes"><i class="fa fa-check"></i><b>6.1.2</b> Prefixes</a></li>
<li class="chapter" data-level="6.1.3" data-path="pivot-advanced.html"><a href="pivot-advanced.html#multiple-values"><i class="fa fa-check"></i><b>6.1.3</b> Multiple values</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="pivot-advanced.html"><a href="pivot-advanced.html#wider-1"><i class="fa fa-check"></i><b>6.2</b> Wider</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="pivot-advanced.html"><a href="pivot-advanced.html#prefixes-1"><i class="fa fa-check"></i><b>6.2.1</b> Prefixes</a></li>
<li class="chapter" data-level="6.2.2" data-path="pivot-advanced.html"><a href="pivot-advanced.html#multiple-values-1"><i class="fa fa-check"></i><b>6.2.2</b> Multiple values</a></li>
<li class="chapter" data-level="6.2.3" data-path="pivot-advanced.html"><a href="pivot-advanced.html#id_cols"><i class="fa fa-check"></i><b>6.2.3</b> <code>id_cols</code></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Working with APIs</b></span></li>
<li class="chapter" data-level="7" data-path="apis.html"><a href="apis.html"><i class="fa fa-check"></i><b>7</b> Introduction</a></li>
<li class="chapter" data-level="8" data-path="api-basics.html"><a href="api-basics.html"><i class="fa fa-check"></i><b>8</b> API basics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="api-basics.html"><a href="api-basics.html#what-is-an-api"><i class="fa fa-check"></i><b>8.1</b> What is an API?</a></li>
<li class="chapter" data-level="8.2" data-path="api-basics.html"><a href="api-basics.html#find-your-api"><i class="fa fa-check"></i><b>8.2</b> Find your API</a></li>
<li class="chapter" data-level="8.3" data-path="api-basics.html"><a href="api-basics.html#craft-your-request"><i class="fa fa-check"></i><b>8.3</b> Craft your request</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="api-basics.html"><a href="api-basics.html#base-request"><i class="fa fa-check"></i><b>8.3.1</b> Base request</a></li>
<li class="chapter" data-level="8.3.2" data-path="api-basics.html"><a href="api-basics.html#parameters"><i class="fa fa-check"></i><b>8.3.2</b> Parameters</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="api-basics.html"><a href="api-basics.html#test-your-request"><i class="fa fa-check"></i><b>8.4</b> Test your request</a></li>
<li class="chapter" data-level="8.5" data-path="api-basics.html"><a href="api-basics.html#read-the-data-into-r"><i class="fa fa-check"></i><b>8.5</b> Read the data into R</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="api-basics.html"><a href="api-basics.html#json-data"><i class="fa fa-check"></i><b>8.5.1</b> JSON data</a></li>
<li class="chapter" data-level="8.5.2" data-path="api-basics.html"><a href="api-basics.html#all-formats"><i class="fa fa-check"></i><b>8.5.2</b> All formats</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="api-basics.html"><a href="api-basics.html#next-steps"><i class="fa fa-check"></i><b>8.6</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="census.html"><a href="census.html"><i class="fa fa-check"></i><b>9</b> U.S. Census Bureau</a>
<ul>
<li class="chapter" data-level="9.1" data-path="census.html"><a href="census.html#census-bureau-basics"><i class="fa fa-check"></i><b>9.1</b> Census Bureau basics</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="census.html"><a href="census.html#decennial-census"><i class="fa fa-check"></i><b>9.1.1</b> Decennial census</a></li>
<li class="chapter" data-level="9.1.2" data-path="census.html"><a href="census.html#acs"><i class="fa fa-check"></i><b>9.1.2</b> ACS</a></li>
<li class="chapter" data-level="9.1.3" data-path="census.html"><a href="census.html#population-estimates"><i class="fa fa-check"></i><b>9.1.3</b> Population estimates</a></li>
<li class="chapter" data-level="9.1.4" data-path="census.html"><a href="census.html#choosing-data"><i class="fa fa-check"></i><b>9.1.4</b> Choosing data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="census.html"><a href="census.html#tidycensus"><i class="fa fa-check"></i><b>9.2</b> tidycensus</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="census.html"><a href="census.html#specify-a-dataset"><i class="fa fa-check"></i><b>9.2.1</b> Specify a dataset</a></li>
<li class="chapter" data-level="9.2.2" data-path="census.html"><a href="census.html#find-variables"><i class="fa fa-check"></i><b>9.2.2</b> Find variables</a></li>
<li class="chapter" data-level="9.2.3" data-path="census.html"><a href="census.html#get-data"><i class="fa fa-check"></i><b>9.2.3</b> Get data</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="census.html"><a href="census.html#population-estimates-1"><i class="fa fa-check"></i><b>9.3</b> Population estimates</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="census.html"><a href="census.html#choose-data"><i class="fa fa-check"></i><b>9.3.1</b> Choose data</a></li>
<li class="chapter" data-level="9.3.2" data-path="census.html"><a href="census.html#craft-your-request-1"><i class="fa fa-check"></i><b>9.3.2</b> Craft your request</a></li>
<li class="chapter" data-level="9.3.3" data-path="census.html"><a href="census.html#read-the-data-into-r-1"><i class="fa fa-check"></i><b>9.3.3</b> Read the data into R</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="census.html"><a href="census.html#to-learn-more"><i class="fa fa-check"></i><b>9.4</b> To learn more</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="googlesheets.html"><a href="googlesheets.html"><i class="fa fa-check"></i><b>10</b> Google Sheets</a>
<ul>
<li class="chapter" data-level="10.1" data-path="googlesheets.html"><a href="googlesheets.html#reading"><i class="fa fa-check"></i><b>10.1</b> Reading</a></li>
<li class="chapter" data-level="10.2" data-path="googlesheets.html"><a href="googlesheets.html#writing"><i class="fa fa-check"></i><b>10.2</b> Writing</a></li>
<li class="chapter" data-level="10.3" data-path="googlesheets.html"><a href="googlesheets.html#finding-sheets"><i class="fa fa-check"></i><b>10.3</b> Finding sheets</a></li>
<li class="chapter" data-level="10.4" data-path="googlesheets.html"><a href="googlesheets.html#authentication"><i class="fa fa-check"></i><b>10.4</b> Authentication</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="googlesheets.html"><a href="googlesheets.html#interactive-session"><i class="fa fa-check"></i><b>10.4.1</b> Interactive session</a></li>
<li class="chapter" data-level="10.4.2" data-path="googlesheets.html"><a href="googlesheets.html#non-interactive-session"><i class="fa fa-check"></i><b>10.4.2</b> Non-interactive session</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Web scraping</b></span></li>
<li class="chapter" data-level="11" data-path="rvest.html"><a href="rvest.html"><i class="fa fa-check"></i><b>11</b> rvest</a>
<ul>
<li class="chapter" data-level="11.1" data-path="rvest.html"><a href="rvest.html#web-page-basics"><i class="fa fa-check"></i><b>11.1</b> Web page basics</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="rvest.html"><a href="rvest.html#html"><i class="fa fa-check"></i><b>11.1.1</b> HTML</a></li>
<li class="chapter" data-level="11.1.2" data-path="rvest.html"><a href="rvest.html#css"><i class="fa fa-check"></i><b>11.1.2</b> CSS</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="rvest.html"><a href="rvest.html#scrape-data-with-rvest"><i class="fa fa-check"></i><b>11.2</b> Scrape data with rvest</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="rvest.html"><a href="rvest.html#read-html"><i class="fa fa-check"></i><b>11.2.1</b> Read HTML</a></li>
<li class="chapter" data-level="11.2.2" data-path="rvest.html"><a href="rvest.html#find-the-css-selector"><i class="fa fa-check"></i><b>11.2.2</b> Find the CSS selector</a></li>
<li class="chapter" data-level="11.2.3" data-path="rvest.html"><a href="rvest.html#extract-the-table"><i class="fa fa-check"></i><b>11.2.3</b> Extract the table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basics" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Basics</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="manip-basics.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="manip-basics.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code></pre></div>
<div id="dplyr-basics" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> dplyr basics</h2>
<p>In this section you will learn about three important dplyr functions that give you basic data manipulation power:</p>
<ul>
<li>Pick observations by their values (<code>filter()</code>).</li>
<li>Create new variables from existing variables (<code>mutate()</code>).</li>
<li>Collapse many values down to a single summary (<code>summarize()</code>).</li>
</ul>
<p>These can all be used in conjunction with <code>group_by()</code>, which changes the scope of each function from operating on the entire dataset to operating on it group-by-group.</p>
<p>You can use the <a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf">Data Transformation cheatsheet</a> to jog your memory, and learn about other dplyr functions we’ll cover in the future.</p>
<p>All dplyr verbs work similarly:</p>
<ol style="list-style-type: decimal">
<li><p>The first argument is a data frame.</p></li>
<li><p>The subsequent arguments describe what to do with the data frame.</p></li>
<li><p>The result is a new data frame.</p></li>
</ol>
<p>Together these properties make it easy to chain together multiple simple steps to achieve a complex result. Let’s dive in and see how these verbs work.</p>
</div>
<div id="filter-rows-with-filter" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Filter rows with <code>filter()</code></h2>
<p><code>filter()</code> allows you to subset observations based on their values. The first argument is the name of the data frame. The second and subsequent arguments are the expressions that filter the data frame. For example, we can select all flights on January 1st with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="manip-basics.html#cb2-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="manip-basics.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb2-3"><a href="manip-basics.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 842 × 19</span></span>
<span id="cb2-4"><a href="manip-basics.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span id="cb2-5"><a href="manip-basics.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span id="cb2-6"><a href="manip-basics.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2013     1     1      517            515         2      830            819</span></span>
<span id="cb2-7"><a href="manip-basics.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2013     1     1      533            529         4      850            830</span></span>
<span id="cb2-8"><a href="manip-basics.html#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2013     1     1      542            540         2      923            850</span></span>
<span id="cb2-9"><a href="manip-basics.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2013     1     1      544            545        -1     1004           1022</span></span>
<span id="cb2-10"><a href="manip-basics.html#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2013     1     1      554            600        -6      812            837</span></span>
<span id="cb2-11"><a href="manip-basics.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2013     1     1      554            558        -4      740            728</span></span>
<span id="cb2-12"><a href="manip-basics.html#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 836 more rows, and 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,</span></span>
<span id="cb2-13"><a href="manip-basics.html#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,</span></span>
<span id="cb2-14"><a href="manip-basics.html#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</span></span></code></pre></div>
<p>When you run that line of code, dplyr executes the filtering operation and returns a new data frame. dplyr functions never modify their inputs, so if you want to save the result, you’ll need to use the assignment operator, <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="manip-basics.html#cb3-1" aria-hidden="true" tabindex="-1"></a>jan1 <span class="ot">&lt;-</span></span>
<span id="cb3-2"><a href="manip-basics.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="manip-basics.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<div id="comparisons" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Comparisons</h3>
<p>To use filtering effectively, you have to know how to select the observations that you want using the comparison operators. R provides the standard relational operators: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code> (equal), and <code>!=</code> (not equal).</p>
<p>When you’re starting out with R, the easiest mistake to make is to use <code>=</code> instead of <code>==</code> when testing for equality. When this happens, you’ll get an informative error:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="manip-basics.html#cb4-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="manip-basics.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="at">month =</span> <span class="dv">1</span>)</span>
<span id="cb4-3"><a href="manip-basics.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Problem with `filter()` input `..1`.</span></span>
<span id="cb4-4"><a href="manip-basics.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x Input `..1` is named.</span></span>
<span id="cb4-5"><a href="manip-basics.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ This usually means that you&#39;ve used `=` instead of `==`.</span></span>
<span id="cb4-6"><a href="manip-basics.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Did you mean `month == 1`?</span></span></code></pre></div>
</div>
<div id="logical-operators" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Logical operators</h3>
<p>Multiple arguments to <code>filter()</code> are combined with “and”: every expression must be true in order for a row to be included in the output. For other types of combinations, you’ll need to use Boolean operators yourself: <code>&amp;</code> is “and,” <code>|</code> is “or,” and <code>!</code> is “not.”</p>
<p>The following code finds all flights that departed in November or December:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="manip-basics.html#cb5-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="manip-basics.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">11</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="dv">12</span>)</span></code></pre></div>
<p>The order of operations doesn’t work like English. You can’t write <code>filter(flights, month == 11 | 12)</code>, which you might literally translate into “finds all flights that departed in November or December.” Instead it finds all months that equal <code>11 | 12</code>, an expression that evaluates to <code>TRUE</code>. In a numeric context (like here), <code>TRUE</code> becomes one, so this finds all flights in January, not November or December. This is quite confusing!</p>
<p>A useful equivalent way to filter is to use <code>x %in% y</code>. This will select every row where <code>x</code> is one of the values in <code>y</code>. We could use it to rewrite the code above:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="manip-basics.html#cb6-1" aria-hidden="true" tabindex="-1"></a>nov_dec <span class="ot">&lt;-</span> </span>
<span id="cb6-2"><a href="manip-basics.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="manip-basics.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span></code></pre></div>
<p>As well as <code>&amp;</code> and <code>|</code>, R also has <code>&amp;&amp;</code> and <code>||</code>. Don’t use them here! You’ll learn more about them later.</p>
</div>
</div>
<div id="add-new-variables-with-mutate" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Add new variables with <code>mutate()</code></h2>
<p>Besides selecting sets of existing columns, it’s often useful to add new columns that are functions of existing columns. That’s the job of <code>mutate()</code>.</p>
<p><code>mutate()</code> always adds new columns at the end of your dataset, so we’ll start by creating a narrower dataset so we can see the new variables. Remember that when you’re in RStudio, the easiest way to see all the columns is <code>view()</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="manip-basics.html#cb7-1" aria-hidden="true" tabindex="-1"></a>flights_small <span class="ot">&lt;-</span> </span>
<span id="cb7-2"><a href="manip-basics.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="manip-basics.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>( </span>
<span id="cb7-4"><a href="manip-basics.html#cb7-4" aria-hidden="true" tabindex="-1"></a>    year<span class="sc">:</span>day, </span>
<span id="cb7-5"><a href="manip-basics.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ends_with</span>(<span class="st">&quot;delay&quot;</span>), </span>
<span id="cb7-6"><a href="manip-basics.html#cb7-6" aria-hidden="true" tabindex="-1"></a>    distance, </span>
<span id="cb7-7"><a href="manip-basics.html#cb7-7" aria-hidden="true" tabindex="-1"></a>    air_time</span>
<span id="cb7-8"><a href="manip-basics.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-9"><a href="manip-basics.html#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="manip-basics.html#cb7-10" aria-hidden="true" tabindex="-1"></a>flights_small <span class="sc">%&gt;%</span> </span>
<span id="cb7-11"><a href="manip-basics.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-12"><a href="manip-basics.html#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay,</span>
<span id="cb7-13"><a href="manip-basics.html#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> <span class="dv">60</span> <span class="sc">*</span> distance <span class="sc">/</span> air_time</span>
<span id="cb7-14"><a href="manip-basics.html#cb7-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-15"><a href="manip-basics.html#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 336,776 × 9</span></span>
<span id="cb7-16"><a href="manip-basics.html#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    year month   day dep_delay arr_delay distance air_time  gain speed</span></span>
<span id="cb7-17"><a href="manip-basics.html#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb7-18"><a href="manip-basics.html#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2013     1     1         2        11     1400      227     9  370.</span></span>
<span id="cb7-19"><a href="manip-basics.html#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2013     1     1         4        20     1416      227    16  374.</span></span>
<span id="cb7-20"><a href="manip-basics.html#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2013     1     1         2        33     1089      160    31  408.</span></span>
<span id="cb7-21"><a href="manip-basics.html#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2013     1     1        -1       -18     1576      183   -17  517.</span></span>
<span id="cb7-22"><a href="manip-basics.html#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2013     1     1        -6       -25      762      116   -19  394.</span></span>
<span id="cb7-23"><a href="manip-basics.html#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2013     1     1        -4        12      719      150    16  288.</span></span>
<span id="cb7-24"><a href="manip-basics.html#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 336,770 more rows</span></span></code></pre></div>
<p>Note that you can refer to columns that you’ve just created:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="manip-basics.html#cb8-1" aria-hidden="true" tabindex="-1"></a>flights_small <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="manip-basics.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-3"><a href="manip-basics.html#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay,</span>
<span id="cb8-4"><a href="manip-basics.html#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">hours =</span> air_time <span class="sc">/</span> <span class="dv">60</span>,</span>
<span id="cb8-5"><a href="manip-basics.html#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain_per_hour =</span> gain <span class="sc">/</span> hours</span>
<span id="cb8-6"><a href="manip-basics.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-7"><a href="manip-basics.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 336,776 × 10</span></span>
<span id="cb8-8"><a href="manip-basics.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    year month   day dep_delay arr_delay distance air_time  gain hours</span></span>
<span id="cb8-9"><a href="manip-basics.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb8-10"><a href="manip-basics.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2013     1     1         2        11     1400      227     9  3.78</span></span>
<span id="cb8-11"><a href="manip-basics.html#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2013     1     1         4        20     1416      227    16  3.78</span></span>
<span id="cb8-12"><a href="manip-basics.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2013     1     1         2        33     1089      160    31  2.67</span></span>
<span id="cb8-13"><a href="manip-basics.html#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2013     1     1        -1       -18     1576      183   -17  3.05</span></span>
<span id="cb8-14"><a href="manip-basics.html#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2013     1     1        -6       -25      762      116   -19  1.93</span></span>
<span id="cb8-15"><a href="manip-basics.html#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2013     1     1        -4        12      719      150    16  2.5 </span></span>
<span id="cb8-16"><a href="manip-basics.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 336,770 more rows, and 1 more variable: gain_per_hour &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div id="grouped-summaries-with-summarize" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Grouped summaries with <code>summarize()</code></h2>
<p>The last key verb is <code>summarize()</code>. It collapses a data frame to a single row:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="manip-basics.html#cb9-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="manip-basics.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb9-3"><a href="manip-basics.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb9-4"><a href="manip-basics.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   delay</span></span>
<span id="cb9-5"><a href="manip-basics.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt;</span></span>
<span id="cb9-6"><a href="manip-basics.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  12.6</span></span></code></pre></div>
<p>(<code>na.rm = TRUE</code> removes the missing values so they don’t affect the final summary.)</p>
<p><code>summarize()</code> is not terribly useful unless we pair it with <code>group_by()</code>. This changes the unit of analysis from the complete dataset to individual groups. Then, when you use the dplyr verbs on a grouped data frame, they’ll be automatically applied “by group.” For example, if we applied exactly the same code to a data frame grouped by date, we get the average delay per date:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="manip-basics.html#cb10-1" aria-hidden="true" tabindex="-1"></a>by_day <span class="ot">&lt;-</span> </span>
<span id="cb10-2"><a href="manip-basics.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="manip-basics.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day)</span>
<span id="cb10-4"><a href="manip-basics.html#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="manip-basics.html#cb10-5" aria-hidden="true" tabindex="-1"></a>by_day <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a href="manip-basics.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-7"><a href="manip-basics.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 365 × 4</span></span>
<span id="cb10-8"><a href="manip-basics.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   year, month [12]</span></span>
<span id="cb10-9"><a href="manip-basics.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    year month   day delay</span></span>
<span id="cb10-10"><a href="manip-basics.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb10-11"><a href="manip-basics.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2013     1     1 11.5 </span></span>
<span id="cb10-12"><a href="manip-basics.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2013     1     2 13.9 </span></span>
<span id="cb10-13"><a href="manip-basics.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2013     1     3 11.0 </span></span>
<span id="cb10-14"><a href="manip-basics.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2013     1     4  8.95</span></span>
<span id="cb10-15"><a href="manip-basics.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2013     1     5  5.73</span></span>
<span id="cb10-16"><a href="manip-basics.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2013     1     6  7.15</span></span>
<span id="cb10-17"><a href="manip-basics.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 359 more rows</span></span></code></pre></div>
<p>Together <code>group_by()</code> and <code>summarize()</code> provide one of the tools that you’ll use most commonly when working with dplyr: grouped summaries. But before we go any further with this, we need to introduce a powerful new idea: the pipe.</p>
</div>
<div id="combining-multiple-operations-with-the-pipe" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Combining multiple operations with the pipe</h2>
<p>Imagine that we want to explore the relationship between the distance and average delay for each location. Using what you know about dplyr and not using pipes, you might write code like this:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="manip-basics.html#cb11-1" aria-hidden="true" tabindex="-1"></a>by_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights, dest)</span>
<span id="cb11-2"><a href="manip-basics.html#cb11-2" aria-hidden="true" tabindex="-1"></a>delay <span class="ot">&lt;-</span> </span>
<span id="cb11-3"><a href="manip-basics.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb11-4"><a href="manip-basics.html#cb11-4" aria-hidden="true" tabindex="-1"></a>    by_dest,</span>
<span id="cb11-5"><a href="manip-basics.html#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb11-6"><a href="manip-basics.html#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dist =</span> <span class="fu">mean</span>(distance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-7"><a href="manip-basics.html#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-8"><a href="manip-basics.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-9"><a href="manip-basics.html#cb11-9" aria-hidden="true" tabindex="-1"></a>delay <span class="ot">&lt;-</span> <span class="fu">filter</span>(delay, count <span class="sc">&gt;</span> <span class="dv">20</span>, dest <span class="sc">!=</span> <span class="st">&quot;HNL&quot;</span>)</span>
<span id="cb11-10"><a href="manip-basics.html#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="manip-basics.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> delay, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dist, <span class="at">y =</span> delay)) <span class="sc">+</span></span>
<span id="cb11-12"><a href="manip-basics.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> count), <span class="at">alpha =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb11-13"><a href="manip-basics.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="manip-basics_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It looks like delays increase with distance up to ~750 miles and then decrease. Maybe as flights get longer there’s more ability to make up delays in the air?</p>
<p>There are three steps to prepare this data:</p>
<ol style="list-style-type: decimal">
<li><p>Group flights by destination.</p></li>
<li><p>Summarize to compute distance, average delay, and number of flights.</p></li>
<li><p>Filter to remove noisy points and Honolulu airport, which is almost
twice as far away as the next closest airport.</p></li>
</ol>
<p>This code is a little frustrating to write because we have to give each intermediate data frame a name, even though we don’t care about it. Naming things is hard, so this slows down our analysis.</p>
<p>It’s better to tackle the same problem with the pipe, <code>%&gt;%</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="manip-basics.html#cb12-1" aria-hidden="true" tabindex="-1"></a>delays <span class="ot">&lt;-</span> </span>
<span id="cb12-2"><a href="manip-basics.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="manip-basics.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="manip-basics.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb12-5"><a href="manip-basics.html#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb12-6"><a href="manip-basics.html#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dist =</span> <span class="fu">mean</span>(distance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-7"><a href="manip-basics.html#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-8"><a href="manip-basics.html#cb12-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="manip-basics.html#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>, dest <span class="sc">!=</span> <span class="st">&quot;HNL&quot;</span>)</span></code></pre></div>
<p>This focuses on the transformations, not what’s being transformed, which makes the code easier to read. You can read it as a series of imperative statements: group, then summarize, then filter. As suggested by this reading, a good way to pronounce <code>%&gt;%</code> when reading code is “then.”</p>
<p>Behind the scenes, <code>x %&gt;% f(y)</code> turns into <code>f(x, y)</code>, and <code>x %&gt;% f(y) %&gt;% g(z)</code> turns into <code>g(f(x, y), z)</code> and so on. You can use the pipe to rewrite multiple operations in a way that you can read left-to-right, top-to-bottom. We’ll use piping frequently from now on because it considerably improves the readability of code, and we’ll come back to it in more detail later on.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manip-one-table.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dcl-docs/wrangle/edit/master/manip-basics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
